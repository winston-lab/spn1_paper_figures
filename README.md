
# [Spn1 2020](https://doi.org/10.1093/nar/gkaa745) paper figures

## description

The code used to produce the figures [our 2020 Spn1 publication](https://doi.org/10.1093/nar/gkaa745). The final figures, unadulterated by copyeditors, are found in `figures/spn1_2020_figures.pdf`. An archive suitable for reproducing the paper's figures starting from raw data is available at [Zenodo](https://doi.org/10.5281/zenodo.3901642).

## requirements

### required software

- Unix-like operating system (tested on CentOS 7.7.1908)
- Git
- [conda](https://docs.conda.io/projects/conda/en/latest/user-guide/install/)
- [snakemake](https://snakemake.readthedocs.io/en/stable/)

### required files

All input files are present or generated by the pipelines in the following directories in the [Zenodo archive](https://doi.org/10.5281/zenodo.3901642):

- `build-annotations-cerevisiae`
- `build-annotations-cerevisiae-mitomask-rDNAmask`
- `demultiplex-spn1-chipseq-1`
- `demultiplex-spn1-chipseq-2`
- `rna-seq`
- `custom_differential_expression`
- `chipseq-h3`
- `chipseq-h3k36me2`
- `chipseq-h3k36me3`
- `chipseq-h3k4me3`
- `chipseq-rpb1`
- `chipseq-rpb1-batch1`
- `chipseq-rpb1-batch2`
- `chipseq-ser2p`
- `chipseq-ser5p`
- `chipseq-set2`
- `chipseq-spn1`
- `chipseq-spt6`
- `chipseq-h3k36me2-h3norm`
- `chipseq-h3k36me3-h3norm`
- `chipseq-h3k4me3-h3norm`
- `chipseq-ser2p-rpb1norm`
- `chipseq-ser5p-rpb1norm`
- `chipseq-set2-rpb1norm-batch12`
- `chipseq-spn1-rpb1norm`
- `chipseq-spt6-rpb1norm-batch12`
- `other-datasets/gasch00`
- `other-datasets/oduibhir2014`
- `spn1-data-integration`
- `custom_figures`

## instructions
**0**. Run the pipelines in the directories listed above in the [Zenodo archive](https://doi.org/10.5281/zenodo.3901642).

**1**. Do a dry run of the pipeline to see what files will be created.

```bash
snakemake -p --use-conda --dry-run
```

**2**. If running the pipeline on a local machine, you can run the pipeline using the above command, omitting the `--dry-run` flag. You can also use N cores by specifying the `--cores N` flag. The first time the pipeline is run, conda will create separate virtual environments for some of the jobs to operate in. The shell script `localrun.sh` is a helper script for running Snakemake to generate and compile the figures.

